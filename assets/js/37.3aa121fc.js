(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{543:function(s,a,t){"use strict";t.r(a);var e=t(44),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"mac-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac-安装"}},[s._v("#")]),s._v(" Mac 安装")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ffmpeg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"查看-mac-上的设备列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-mac-上的设备列表"}},[s._v("#")]),s._v(" 查看 mac 上的设备列表")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ffmpeg -f avfoundation -list_devices "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),s._v(" "),t("h3",{attrs:{id:"屏幕录像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#屏幕录像"}},[s._v("#")]),s._v(" 屏幕录像")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 录屏")]),s._v("\nffmpeg -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -pix_fmt yuv420p out.mp4\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 录屏+录音")]),s._v("\nffmpeg -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":0 -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -pix_fmt yuv420p -c:v libx264 -crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -c:a aac -b:a 192k out.mp4\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 录屏+录音(指定输出分辨率)")]),s._v("\nffmpeg -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":0 -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -s 1024x720 -pix_fmt yuv420p -c:v libx264 -c:a aac -b:a 192k out.mp4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("其中, "),t("code",[s._v("-r")]),s._v(" 指的是帧率(fps)， "),t("code",[s._v("-crf 0")]),s._v(" 指的是无损压缩。")]),s._v(" "),t("p",[t("code",[s._v("-i 1:1")]),s._v(" 前面的1是指视频设备索引，后面的0是指麦克风设备索引，这个值根据上面查看设备列表指令返回的结果而定。")]),s._v(" "),t("p",[s._v("如果报类似的错 "),t("code",[s._v("Too many packets buffered for output stream 0:0")]),s._v("，则加上参数 "),t("code",[s._v("-max_muxing_queue_size 2048")]),s._v(" 如下：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ffmpeg -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":0 -max_muxing_queue_size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -pix_fmt yuv420p -c:v libx264 -s 1920x1080 -b:a 32k out.mp4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"摄像头录制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#摄像头录制"}},[s._v("#")]),s._v(" 摄像头录制")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 录视频")]),s._v("\nffmpeg -framerate "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -pix_fmt yuv420p out.mp4\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 视频 + 音频")]),s._v("\nffmpeg -framerate "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":0 -pix_fmt yuv420p out.mp4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"录音"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#录音"}},[s._v("#")]),s._v(" 录音")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ffmpeg -f avfoundation -i :0 out.wav\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"录制画中画"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#录制画中画"}},[s._v("#")]),s._v(" 录制画中画")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ffmpeg -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" -framerate "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -f avfoundation -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0:0"')]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -c:v libx264 -preset ultrafast -filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[1:v]scale=w=300:h=300:force_original_aspect_ratio=decrease[a];[0:v][a]overlay=x=W-w-10:y=H-h-30[out]"')]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[out]"')]),s._v(" -movflags faststart -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":a -pix_fmt yuv420p -s 1024x720 output.mp4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"rtmp拉流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rtmp拉流"}},[s._v("#")]),s._v(" RTMP拉流")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# url 要加引号，不然会出错")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 播放")]),s._v("\nffplay -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rtmp://223.240.118.251:10085/hls/Seven23?sign=BklPCT0Wg"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看视频信息")]),s._v("\nffprobe -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rtmp://223.240.118.251:10085/hls/Seven23?sign=BklPCT0Wg"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"视频批量切割"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#视频批量切割"}},[s._v("#")]),s._v(" 视频批量切割")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ffmpeg -fflags +genpts -i input.mov -acodec copy -vcodec copy -f segment -segment_time "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -reset_timestamps "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":0 -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":1 piece_%03d.mov\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"视频合并"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#视频合并"}},[s._v("#")]),s._v(" 视频合并")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# index.txt")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'out_000.mp4'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'out_001.mp4'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'out_002.mp4'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并")]),s._v("\nffmpeg -f concat -i index.txt -c copy output.mp4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("- [ffmpeg视频切片转码合并](https://www.dazhuanlan.com/2019/12/04/5de7ce6d6ffdd/)\n- [ffmpeg转码](https://blog.csdn.net/hk_shao/article/details/86688756)\n- [FFmpeg命令实例合集](https://blog.csdn.net/yu540135101/article/details/103025957)\n- [ffmpeg实例，split，pad，crop，scale，hflip，overlay](https://blog.csdn.net/yu540135101/article/details/84332055)")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);